# Reference the main API spec for schema definitions
schemas_ref: "./api_types.yaml#/components/schemas"

client_to_server:
  JoinRequest:
    type: object
    description: "Used to actually join game after connecting to server"
    required: [game_id, player_name]
    properties:
      game_id:
        type: string
      player_name:
        type: string

  LobbyReadyRequest:
    type: object
    description: "Used in lobby to let others know they're ready to start"
    required: [ready]
    properties:
      ready:
        type: boolean

  StartGameRequest:
    type: object
    description: "Called by owning client to start game when all are ready"

  EndTurnRequest:
    type: object
    description: "Called by client to end their turn during the game"

  ChatRequest:
    type: object
    description: "Called by client send a message"
    required: [text]
    properties:
      text:
        type: string

  ActionRequest:
    type: object
    description: "Used to do game actions like using items or fsf"
    required: [choice]
    properties:
      choice:
        $ref: PlayerActionChoice

server_to_client:
  ActionAcknowledge:
    type: object
    description: "Acknowledgement if action was successful or the result"
    required: [successful]
    properties:
      successful:
        type: boolean

  InitResponse:
    type: object
    description: "Initializes game for a new join"
    required: [game_name, game_owner, max_players, players, messages, status]
    properties:
      game_name:
        type: string
      game_owner:
        type: string
      max_players:
        type: integer
      players:
        type: array
        items:
          $ref: Player
      messages:
        type: array
        items:
          $ref: Message
      status:
        type: string
      active_player:
        type: string

  StartGameEvent:
    type: object
    description: "event to move out of lobby phase"
    required: [first_player]
    properties:
      first_player:
        type: string

  PlayersEvent:
    type: object
    description: "Event to update players information"
    required: [players]
    properties:
      players:
        type: array
        items:
          $ref: Player

  ChatEvent:
    type: object
    description: "Event when a chat is sent to everyone"
    required: [message]
    properties:
      message:
        $ref: Message

  ChangeTurnEvent:
    type: object
    description: "Event to tell clients that the turn changed"
    required: [new_active]
    properties:
      new_active:
        type: string
